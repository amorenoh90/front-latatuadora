<template>
  <require from="./login.css"></require>
  <require from="resources/attributes/simple-modal"></require>
  <require from="resources/elements/modals/recover-pass-modal/recover-pass-modal"></require>

  <div class="login">

    <h1 class="login__title">Iniciar sesión</h1>

    <div if.bind="!showLoaders.social" class="login__social">
      <button class="login__social-button--facebook">
        <img class="login__social-icon--facebook" src="/src/assets/images/icons/facebook-icon.svg" alt="Facebook" />
        Iniciar sesión con Facebook
      </button>
      <button class="login__social-button--google">
        <img class="login__social-icon--google" src="/src/assets/images/icons/Google-icon.png" alt="Google" />
        Iniciar sesión con Google
      </button>
      <div if.bind="badRequests.social" class="login__request-error">Ocurrió un error</div>
    </div>
    <div if.bind="showLoaders.social" class="tattoos-grid-loader cp-spinner cp-eclipse"></div>

    <hr class="divider-hr login__divider">

    <div class="login__item login__form">
      <form if.bind="!showLoaders.form">
        <div class="login__input-group" validation-errors.bind="emailErrors">
          <label class="login__input-label" for="email">
            Correo electrónico
          </label>
          <input value.bind="fields.email & validate" class="site-input login__input-email" id="email" type="email">
          <div class="login__errors">
            <div class="login__input-error" repeat.for="errorInfo of emailErrors">
              ${errorInfo.error.message}
            </div>
          </div>
        </div>
        <div class="login__input-group" validation-errors.bind="passwordErrors">
          <label class="login__input-label" for="password">Contraseña</label>
          <input value.bind="fields.password & validate" class="site-input login__input-password" id="password" type="password">
          <div class="login__errors">
            <div class="login__input-error" repeat.for="errorInfo of passwordErrors">
              ${errorInfo.error.message}
            </div>
          </div>
        </div>
        <recover-pass-modal id="recover-pass-content" simple-modal="show.two-way: showModal" css="${showModal ? 'display: block' : 'display: none'}" item.bind="currentItem"  go-next.call="nextItem()" go-prev.call="previousItem()" close.call="closeModal()"></recover-pass-modal>
        <a route-href="route: home" class="login__item login__forgotten" click.trigger="openModal()">Olvidé mi contraseña</a>
        <div class="site-checkbox use-check">
          <input checked.bind="rememberMe" type="checkbox" name="save" id="save">
          <label class="login__input-label-checkbox" for="save"><span>Guardar contraseña</span></label>
        </div>
        <div if.bind="badRequests.form" class="login__request-error">Usuario y/o contraseña inválidos</div>
        <button class="site-button login__input-submit" type="submit" click.delegate="login()">Iniciar Sesión</button>
      </form>
      <div if.bind="showLoaders.form" class="tattoos-grid-loader cp-spinner cp-eclipse"></div>
    </div>

    <div class="login__item login__signup">
      ¿No tienes cuenta? <a route-href="route: home" class="login__signup-link">Regístrate</a>
    </div>

    <img class="login__logo" src="/src/assets/images/logos/logo-home-big.png">

  </div>
</template>
